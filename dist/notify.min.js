"use strict";function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(t,e):void 0}}function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,_toPropertyKey(r.key),r)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function _toPropertyKey(t){var e=_toPrimitive(t,"string");return"symbol"===_typeof(e)?e:String(e)}function _toPrimitive(t,e){if("object"!==_typeof(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==_typeof(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.init=exports.$warning=exports.$success=exports.$message=exports.$info=exports.$error=void 0;var Notify=function(){function t(e){_classCallCheck(this,t),this.options=e,this.notificationWrap=null,this.count=0,this.shownMessages=[]}return _createClass(t,[{key:"show",value:function(t){this.notificationWrap||(this.notificationWrap=document.createElement("div"),this.notificationWrap.classList.add("".concat(this.options.class,"-wrap")),document.body.insertAdjacentElement("afterBegin",this.notificationWrap)),this.notificationWrap.insertAdjacentElement("afterBegin",t)}},{key:"hide",value:function(t){var e=this;t.style.opacity="0";t.addEventListener("transitionend",(function n(){t.parentElement.removeChild(t),t.removeEventListener("transitionend",n),e.shownMessages=e.shownMessages.filter((function(t){return t!==e.count})),e.count-=1,!e.shownMessages.length&&e.notificationWrap&&(document.body.removeChild(e.notificationWrap),e.notificationWrap=null,e.count=0)}))}},{key:"render",value:function(t){var e,n=t.message,r=t.state,o=t.icon,i=document.createElement("div"),s=this.options.class,a=this.options.additionalClasses.split(" ").filter(Boolean);(e=i.classList).add.apply(e,[s].concat(_toConsumableArray(a))),r&&i.classList.add("".concat(s,"--").concat(r)),o?i.innerHTML='\n      <i class="'.concat(s,"__icon ").concat(o,'"></i>\n      <span class="').concat(s,'__body">').concat(n,"</span>\n    "):i.textContent=n,this.count+=1,this.shownMessages.push(this.count),this.show(i),setTimeout(this.hide.bind(this,i),this.options.duration),clearTimeout(this.hide)}}]),t}(),$message=function(){};exports.$message=$message;var $success=function(){};exports.$success=$success;var $info=function(){};exports.$info=$info;var $warning=function(){};exports.$warning=$warning;var $error=function(){};exports.$error=$error;var init=function(t){var e=new Notify({class:(null==t?void 0:t.class)||"notify",additionalClasses:(null==t?void 0:t.additionalClasses)||"",duration:(null==t?void 0:t.duration)||6e3});exports.$message=$message=function(t){return e.render({message:t})},exports.$success=$success=function(n){var r,o;return e.render({message:n,state:(null==t||null===(r=t.state)||void 0===r?void 0:r.success)||"",icon:(null==t||null===(o=t.icons)||void 0===o?void 0:o.success)||""})},exports.$info=$info=function(n){var r,o;return e.render({message:n,state:(null==t||null===(r=t.state)||void 0===r?void 0:r.info)||"",icon:(null==t||null===(o=t.icons)||void 0===o?void 0:o.info)||""})},exports.$warning=$warning=function(n){var r,o;return e.render({message:n,state:(null==t||null===(r=t.state)||void 0===r?void 0:r.warning)||"",icon:(null==t||null===(o=t.icons)||void 0===o?void 0:o.warning)||""})},exports.$error=$error=function(n){var r,o;return e.render({message:n,state:(null==t||null===(r=t.state)||void 0===r?void 0:r.error)||"",icon:(null==t||null===(o=t.icons)||void 0===o?void 0:o.error)||""})}};exports.init=init;
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vdGlmeS5qcyJdLCJuYW1lcyI6WyJfdHlwZW9mIiwib2JqIiwiU3ltYm9sIiwiaXRlcmF0b3IiLCJjb25zdHJ1Y3RvciIsInByb3RvdHlwZSIsIl90b0NvbnN1bWFibGVBcnJheSIsImFyciIsIl9hcnJheVdpdGhvdXRIb2xlcyIsIl9pdGVyYWJsZVRvQXJyYXkiLCJfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkiLCJfbm9uSXRlcmFibGVTcHJlYWQiLCJUeXBlRXJyb3IiLCJvIiwibWluTGVuIiwiX2FycmF5TGlrZVRvQXJyYXkiLCJuIiwiT2JqZWN0IiwidG9TdHJpbmciLCJjYWxsIiwic2xpY2UiLCJuYW1lIiwiQXJyYXkiLCJmcm9tIiwidGVzdCIsIml0ZXIiLCJpc0FycmF5IiwibGVuIiwibGVuZ3RoIiwiaSIsImFycjIiLCJfY2xhc3NDYWxsQ2hlY2siLCJpbnN0YW5jZSIsIkNvbnN0cnVjdG9yIiwiX2RlZmluZVByb3BlcnRpZXMiLCJ0YXJnZXQiLCJwcm9wcyIsImRlc2NyaXB0b3IiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJkZWZpbmVQcm9wZXJ0eSIsIl90b1Byb3BlcnR5S2V5Iiwia2V5IiwiX2NyZWF0ZUNsYXNzIiwicHJvdG9Qcm9wcyIsInN0YXRpY1Byb3BzIiwiYXJnIiwiX3RvUHJpbWl0aXZlIiwiU3RyaW5nIiwiaW5wdXQiLCJoaW50IiwicHJpbSIsInRvUHJpbWl0aXZlIiwidW5kZWZpbmVkIiwicmVzIiwiTnVtYmVyIiwiZXhwb3J0cyIsInZhbHVlIiwiaW5pdCIsIiR3YXJuaW5nIiwiJHN1Y2Nlc3MiLCIkbWVzc2FnZSIsIiRpbmZvIiwiJGVycm9yIiwiTm90aWZ5Iiwib3B0aW9ucyIsInRoaXMiLCJub3RpZmljYXRpb25XcmFwIiwiY291bnQiLCJzaG93bk1lc3NhZ2VzIiwiZWxlbWVudCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTGlzdCIsImFkZCIsImNvbmNhdCIsImJvZHkiLCJpbnNlcnRBZGphY2VudEVsZW1lbnQiLCJfdGhpcyIsInN0eWxlIiwib3BhY2l0eSIsImFkZEV2ZW50TGlzdGVuZXIiLCJ3aGVuVHJhbnNpdGlvbkVuZCIsInBhcmVudEVsZW1lbnQiLCJyZW1vdmVDaGlsZCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJmaWx0ZXIiLCJudW1iZXIiLCJfcmVmIiwiX25ld01lc3NhZ2VzJGNsYXNzTGlzIiwibWVzc2FnZSIsInN0YXRlIiwiaWNvbiIsIm5ld01lc3NhZ2VzIiwibm90aWZ5Q2xhc3MiLCJhZGRpdGlvbmFsQ2xhc3NlcyIsInNwbGl0IiwiQm9vbGVhbiIsImFwcGx5IiwiaW5uZXJIVE1MIiwidGV4dENvbnRlbnQiLCJwdXNoIiwic2hvdyIsInNldFRpbWVvdXQiLCJoaWRlIiwiYmluZCIsImR1cmF0aW9uIiwiY2xlYXJUaW1lb3V0Iiwibm90aWZ5IiwiY2xhc3MiLCJyZW5kZXIiLCJfb3B0aW9ucyRzdGF0ZSIsIl9vcHRpb25zJGljb25zIiwic3VjY2VzcyIsImljb25zIiwiX29wdGlvbnMkc3RhdGUyIiwiX29wdGlvbnMkaWNvbnMyIiwiaW5mbyIsIl9vcHRpb25zJHN0YXRlMyIsIl9vcHRpb25zJGljb25zMyIsIndhcm5pbmciLCJfb3B0aW9ucyRzdGF0ZTQiLCJfb3B0aW9ucyRpY29uczQiLCJlcnJvciJdLCJtYXBwaW5ncyI6IkFBQUEsYUFNQSxTQUFTQSxRQUFRQyxHQUFrQyxPQUFPRCxRQUFVLG1CQUFxQkUsUUFBVSxpQkFBbUJBLE9BQU9DLFNBQVcsU0FBVUYsR0FBTyxjQUFjQSxHQUFTLFNBQVVBLEdBQU8sT0FBT0EsR0FBTyxtQkFBcUJDLFFBQVVELEVBQUlHLGNBQWdCRixRQUFVRCxJQUFRQyxPQUFPRyxVQUFZLGdCQUFrQkosR0FBUUQsUUFBUUMsR0FDelUsU0FBU0ssbUJBQW1CQyxHQUFPLE9BQU9DLG1CQUFtQkQsSUFBUUUsaUJBQWlCRixJQUFRRyw0QkFBNEJILElBQVFJLHFCQUNsSSxTQUFTQSxxQkFBdUIsTUFBTSxJQUFJQyxV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QixFQUFBQyxFQUFBLE9BQ2JSLEVBQU9FLE9BQU8sQ0FDWnBCLFFBQUFBLEVBQ0FDLE9BQU8xQixTQUFjLFFBQVBrRCxFQUFQbEQsRUFBUzBCLGFBQUssSUFBQXdCLE9BQVAsRUFBUEEsRUFBZ0JFLE9BQVEsR0FDL0J6QixNQUFNM0IsU0FBYyxRQUFQbUQsRUFBUG5ELEVBQVNpRCxhQUFLLElBQUFFLE9BQVAsRUFBUEEsRUFBZ0JDLE9BQVEsTUFHbEM3RCxRQUFBRyxTQUFBQSxTQUFXLFNBQUErQixHQUFPLElBQUE0QixFQUFBQyxFQUFBLE9BQ2hCWCxFQUFPRSxPQUFPLENBQ1pwQixRQUFBQSxFQUNBQyxPQUFPMUIsU0FBYyxRQUFQcUQsRUFBUHJELEVBQVMwQixhQUFLLElBQUEyQixPQUFQLEVBQVBBLEVBQWdCRSxVQUFXLEdBQ2xDNUIsTUFBTTNCLFNBQWMsUUFBUHNELEVBQVB0RCxFQUFTaUQsYUFBSyxJQUFBSyxPQUFQLEVBQVBBLEVBQWdCQyxVQUFXLE1BR3JDaEUsUUFBQU8sT0FBQUEsT0FBUyxTQUFBMkIsR0FBTyxJQUFBK0IsRUFBQUMsRUFBQSxPQUNkZCxFQUFPRSxPQUFPLENBQ1pwQixRQUFBQSxFQUNBQyxPQUFPMUIsU0FBYyxRQUFQd0QsRUFBUHhELEVBQVMwQixhQUFLLElBQUE4QixPQUFQLEVBQVBBLEVBQWdCRSxRQUFTLEdBQ2hDL0IsTUFBTTNCLFNBQWMsUUFBUHlELEVBQVB6RCxFQUFTaUQsYUFBSyxJQUFBUSxPQUFQLEVBQVBBLEVBQWdCQyxRQUFTLE9BRW5DbkUsUUFBQUUsS0FBQUEiLCJmaWxlIjoibm90aWZ5LmpzIiwic291cmNlc0NvbnRlbnQiOlsiY2xhc3MgTm90aWZ5IHtcbiAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgdGhpcy5ub3RpZmljYXRpb25XcmFwID0gbnVsbDtcbiAgICB0aGlzLmNvdW50ID0gMDtcbiAgICB0aGlzLnNob3duTWVzc2FnZXMgPSBbXTtcbiAgfVxuXG4gIHNob3coZWxlbWVudCkge1xuICAgIGlmICghdGhpcy5ub3RpZmljYXRpb25XcmFwKSB7XG4gICAgICB0aGlzLm5vdGlmaWNhdGlvbldyYXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblxuICAgICAgdGhpcy5ub3RpZmljYXRpb25XcmFwLmNsYXNzTGlzdC5hZGQoYCR7dGhpcy5vcHRpb25zLmNsYXNzfS13cmFwYCk7XG4gICAgICBkb2N1bWVudC5ib2R5Lmluc2VydEFkamFjZW50RWxlbWVudCgnYWZ0ZXJCZWdpbicsIHRoaXMubm90aWZpY2F0aW9uV3JhcCk7XG4gICAgfVxuXG4gICAgdGhpcy5ub3RpZmljYXRpb25XcmFwLmluc2VydEFkamFjZW50RWxlbWVudCgnYWZ0ZXJCZWdpbicsIGVsZW1lbnQpO1xuICB9XG5cbiAgaGlkZShlbGVtZW50KSB7XG4gICAgZWxlbWVudC5zdHlsZS5vcGFjaXR5ID0gJzAnO1xuXG4gICAgY29uc3Qgd2hlblRyYW5zaXRpb25FbmQgPSAoKSA9PiB7XG4gICAgICBlbGVtZW50LnBhcmVudEVsZW1lbnQucmVtb3ZlQ2hpbGQoZWxlbWVudCk7XG4gICAgICBlbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RyYW5zaXRpb25lbmQnLCB3aGVuVHJhbnNpdGlvbkVuZCk7XG5cbiAgICAgIHRoaXMuc2hvd25NZXNzYWdlcyA9IHRoaXMuc2hvd25NZXNzYWdlcy5maWx0ZXIobnVtYmVyID0+IG51bWJlciAhPT0gdGhpcy5jb3VudCk7XG4gICAgICB0aGlzLmNvdW50IC09IDE7XG5cbiAgICAgIGlmICghdGhpcy5zaG93bk1lc3NhZ2VzLmxlbmd0aCAmJiB0aGlzLm5vdGlmaWNhdGlvbldyYXApIHtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZCh0aGlzLm5vdGlmaWNhdGlvbldyYXApO1xuXG4gICAgICAgIHRoaXMubm90aWZpY2F0aW9uV3JhcCA9IG51bGw7XG4gICAgICAgIHRoaXMuY291bnQgPSAwO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RyYW5zaXRpb25lbmQnLCB3aGVuVHJhbnNpdGlvbkVuZCk7XG4gIH1cblxuICByZW5kZXIoeyBtZXNzYWdlLCBzdGF0ZSwgaWNvbiB9KSB7XG4gICAgY29uc3QgbmV3TWVzc2FnZXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBjb25zdCBub3RpZnlDbGFzcyA9IHRoaXMub3B0aW9ucy5jbGFzcztcbiAgICBjb25zdCBhZGRpdGlvbmFsQ2xhc3NlcyA9IHRoaXMub3B0aW9ucy5hZGRpdGlvbmFsQ2xhc3Nlcy5zcGxpdCgnICcpLmZpbHRlcihCb29sZWFuKTtcblxuICAgIG5ld01lc3NhZ2VzLmNsYXNzTGlzdC5hZGQobm90aWZ5Q2xhc3MsIC4uLmFkZGl0aW9uYWxDbGFzc2VzKTtcblxuICAgIGlmIChzdGF0ZSkge1xuICAgICAgbmV3TWVzc2FnZXMuY2xhc3NMaXN0LmFkZChgJHtub3RpZnlDbGFzc30tLSR7c3RhdGV9YCk7XG4gICAgfVxuXG4gICAgaWYgKGljb24pIHtcbiAgICAgIG5ld01lc3NhZ2VzLmlubmVySFRNTCA9IGBcbiAgICAgIDxpIGNsYXNzPVwiJHtub3RpZnlDbGFzc31fX2ljb24gJHtpY29ufVwiPjwvaT5cbiAgICAgIDxzcGFuIGNsYXNzPVwiJHtub3RpZnlDbGFzc31fX2JvZHlcIj4ke21lc3NhZ2V9PC9zcGFuPlxuICAgIGA7XG4gICAgfSBlbHNlIHtcbiAgICAgIG5ld01lc3NhZ2VzLnRleHRDb250ZW50ID0gbWVzc2FnZTtcbiAgICB9XG5cbiAgICB0aGlzLmNvdW50ICs9IDE7XG5cbiAgICB0aGlzLnNob3duTWVzc2FnZXMucHVzaCh0aGlzLmNvdW50KTtcblxuICAgIHRoaXMuc2hvdyhuZXdNZXNzYWdlcyk7XG5cbiAgICBzZXRUaW1lb3V0KHRoaXMuaGlkZS5iaW5kKHRoaXMsIG5ld01lc3NhZ2VzKSwgdGhpcy5vcHRpb25zLmR1cmF0aW9uKTtcbiAgICBjbGVhclRpbWVvdXQodGhpcy5oaWRlKTtcbiAgfVxufVxuXG5sZXQgJG1lc3NhZ2UgPSAoKSA9PiB7fTtcblxubGV0ICRzdWNjZXNzID0gKCkgPT4ge307XG5cbmxldCAkaW5mbyA9ICgpID0+IHt9O1xuXG5sZXQgJHdhcm5pbmcgPSAoKSA9PiB7fTtcblxubGV0ICRlcnJvciA9ICgpID0+IHt9O1xuXG5jb25zdCBpbml0ID0gb3B0aW9ucyA9PiB7XG4gIGNvbnN0IG5vdGlmeSA9IG5ldyBOb3RpZnkoe1xuICAgIGNsYXNzOiBvcHRpb25zPy5jbGFzcyB8fCAnbm90aWZ5JyxcbiAgICBhZGRpdGlvbmFsQ2xhc3Nlczogb3B0aW9ucz8uYWRkaXRpb25hbENsYXNzZXMgfHwgJycsXG4gICAgZHVyYXRpb246IG9wdGlvbnM/LmR1cmF0aW9uIHx8IDYwMDAsXG4gIH0pO1xuXG4gICRtZXNzYWdlID0gbWVzc2FnZSA9PlxuICAgIG5vdGlmeS5yZW5kZXIoe1xuICAgICAgbWVzc2FnZSxcbiAgICB9KTtcblxuICAkc3VjY2VzcyA9IG1lc3NhZ2UgPT5cbiAgICBub3RpZnkucmVuZGVyKHtcbiAgICAgIG1lc3NhZ2UsXG4gICAgICBzdGF0ZTogb3B0aW9ucz8uc3RhdGU/LnN1Y2Nlc3MgfHwgJycsXG4gICAgICBpY29uOiBvcHRpb25zPy5pY29ucz8uc3VjY2VzcyB8fCAnJyxcbiAgICB9KTtcblxuICAkaW5mbyA9IG1lc3NhZ2UgPT5cbiAgICBub3RpZnkucmVuZGVyKHtcbiAgICAgIG1lc3NhZ2UsXG4gICAgICBzdGF0ZTogb3B0aW9ucz8uc3RhdGU/LmluZm8gfHwgJycsXG4gICAgICBpY29uOiBvcHRpb25zPy5pY29ucz8uaW5mbyB8fCAnJyxcbiAgICB9KTtcblxuICAkd2FybmluZyA9IG1lc3NhZ2UgPT5cbiAgICBub3RpZnkucmVuZGVyKHtcbiAgICAgIG1lc3NhZ2UsXG4gICAgICBzdGF0ZTogb3B0aW9ucz8uc3RhdGU/Lndhcm5pbmcgfHwgJycsXG4gICAgICBpY29uOiBvcHRpb25zPy5pY29ucz8ud2FybmluZyB8fCAnJyxcbiAgICB9KTtcblxuICAkZXJyb3IgPSBtZXNzYWdlID0+XG4gICAgbm90aWZ5LnJlbmRlcih7XG4gICAgICBtZXNzYWdlLFxuICAgICAgc3RhdGU6IG9wdGlvbnM/LnN0YXRlPy5lcnJvciB8fCAnJyxcbiAgICAgIGljb246IG9wdGlvbnM/Lmljb25zPy5lcnJvciB8fCAnJyxcbiAgICB9KTtcbn07XG5cbmV4cG9ydCB7IGluaXQsICRtZXNzYWdlLCAkc3VjY2VzcywgJGluZm8sICR3YXJuaW5nLCAkZXJyb3IgfTtcbiJdfQ==
