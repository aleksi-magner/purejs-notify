"use strict";function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,n){if(e){if("string"==typeof e)return _arrayLikeToArray(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(e,n):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,n,t){return n&&_defineProperties(e.prototype,n),t&&_defineProperties(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.init=exports.$warning=exports.$success=exports.$message=exports.$info=exports.$error=void 0;var Notify=function(){function e(n){_classCallCheck(this,e),this.options=n,this.notificationWrap=null,this.count=0,this.shownMessages=[]}return _createClass(e,[{key:"show",value:function(e){this.notificationWrap||(this.notificationWrap=document.createElement("div"),this.notificationWrap.classList.add("".concat(this.options.class,"-wrap")),document.body.insertAdjacentElement("afterBegin",this.notificationWrap)),this.notificationWrap.insertAdjacentElement("afterBegin",e)}},{key:"hide",value:function(e){var n=this;e.style.opacity="0";e.addEventListener("transitionend",(function t(){e.parentElement.removeChild(e),e.removeEventListener("transitionend",t),n.shownMessages=n.shownMessages.filter((function(e){return e!==n.count})),n.count-=1,!n.shownMessages.length&&n.notificationWrap&&(document.body.removeChild(n.notificationWrap),n.notificationWrap=null,n.count=0)}))}},{key:"render",value:function(e){var n,t=e.message,r=e.state,o=e.icon,i=document.createElement("div"),s=this.options.class,a=this.options.additionalClasses.split(" ").filter(Boolean);(n=i.classList).add.apply(n,[s].concat(_toConsumableArray(a))),r&&i.classList.add("".concat(s,"--").concat(r)),o?i.innerHTML='\n      <i class="'.concat(s,"__icon ").concat(o,'"></i>\n      <span class="').concat(s,'__body">').concat(t,"</span>\n    "):i.textContent=t,this.count+=1,this.shownMessages.push(this.count),this.show(i),setTimeout(this.hide.bind(this,i),this.options.duration),clearTimeout(this.hide)}}]),e}(),$message=function(){};exports.$message=$message;var $success=function(){};exports.$success=$success;var $info=function(){};exports.$info=$info;var $warning=function(){};exports.$warning=$warning;var $error=function(){};exports.$error=$error;var init=function(e){var n=new Notify({class:(null==e?void 0:e.class)||"notify",additionalClasses:(null==e?void 0:e.additionalClasses)||"",duration:(null==e?void 0:e.duration)||6e3});exports.$message=$message=function(e){return n.render({message:e})},exports.$success=$success=function(t){var r,o;return n.render({message:t,state:(null==e||null===(r=e.state)||void 0===r?void 0:r.success)||"",icon:(null==e||null===(o=e.icons)||void 0===o?void 0:o.success)||""})},exports.$info=$info=function(t){var r,o;return n.render({message:t,state:(null==e||null===(r=e.state)||void 0===r?void 0:r.info)||"",icon:(null==e||null===(o=e.icons)||void 0===o?void 0:o.info)||""})},exports.$warning=$warning=function(t){var r,o;return n.render({message:t,state:(null==e||null===(r=e.state)||void 0===r?void 0:r.warning)||"",icon:(null==e||null===(o=e.icons)||void 0===o?void 0:o.warning)||""})},exports.$error=$error=function(t){var r,o;return n.render({message:t,state:(null==e||null===(r=e.state)||void 0===r?void 0:r.error)||"",icon:(null==e||null===(o=e.icons)||void 0===o?void 0:o.error)||""})}};exports.init=init;
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vdGlmeS5qcyJdLCJuYW1lcyI6WyJfdG9Db25zdW1hYmxlQXJyYXkiLCJhcnIiLCJfYXJyYXlXaXRob3V0SG9sZXMiLCJfaXRlcmFibGVUb0FycmF5IiwiX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5IiwiX25vbkl0ZXJhYmxlU3ByZWFkIiwiVHlwZUVycm9yIiwibyIsIm1pbkxlbiIsIl9hcnJheUxpa2VUb0FycmF5IiwibiIsIk9iamVjdCIsInByb3RvdHlwZSIsInRvU3RyaW5nIiwiY2FsbCIsInNsaWNlIiwiY29uc3RydWN0b3IiLCJuYW1lIiwiQXJyYXkiLCJmcm9tIiwidGVzdCIsIml0ZXIiLCJTeW1ib2wiLCJpdGVyYXRvciIsImlzQXJyYXkiLCJsZW4iLCJsZW5ndGgiLCJpIiwiYXJyMiIsIl9jbGFzc0NhbGxDaGVjayIsImluc3RhbmNlIiwiQ29uc3RydWN0b3IiLCJfZGVmaW5lUHJvcGVydGllcyIsInRhcmdldCIsInByb3BzIiwiZGVzY3JpcHRvciIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsImRlZmluZVByb3BlcnR5Iiwia2V5IiwiX2NyZWF0ZUNsYXNzIiwicHJvdG9Qcm9wcyIsInN0YXRpY1Byb3BzIiwiZXhwb3J0cyIsInZhbHVlIiwiaW5pdCIsIiR3YXJuaW5nIiwiJHN1Y2Nlc3MiLCIkbWVzc2FnZSIsIiRpbmZvIiwiJGVycm9yIiwiTm90aWZ5Iiwib3B0aW9ucyIsInRoaXMiLCJub3RpZmljYXRpb25XcmFwIiwiY291bnQiLCJzaG93bk1lc3NhZ2VzIiwiZWxlbWVudCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTGlzdCIsImFkZCIsImNvbmNhdCIsImJvZHkiLCJpbnNlcnRBZGphY2VudEVsZW1lbnQiLCJfdGhpcyIsInN0eWxlIiwib3BhY2l0eSIsImFkZEV2ZW50TGlzdGVuZXIiLCJ3aGVuVHJhbnNpdGlvbkVuZCIsInBhcmVudEVsZW1lbnQiLCJyZW1vdmVDaGlsZCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJmaWx0ZXIiLCJudW1iZXIiLCJfcmVmIiwiX25ld01lc3NhZ2VzJGNsYXNzTGlzIiwibWVzc2FnZSIsInN0YXRlIiwiaWNvbiIsIm5ld01lc3NhZ2VzIiwibm90aWZ5Q2xhc3MiLCJhZGRpdGlvbmFsQ2xhc3NlcyIsInNwbGl0IiwiQm9vbGVhbiIsImFwcGx5IiwiaW5uZXJIVE1MIiwidGV4dENvbnRlbnQiLCJwdXNoIiwic2hvdyIsInNldFRpbWVvdXQiLCJoaWRlIiwiYmluZCIsImR1cmF0aW9uIiwiY2xlYXJUaW1lb3V0Iiwibm90aWZ5IiwiY2xhc3MiLCJyZW5kZXIiLCJfb3B0aW9ucyRzdGF0ZSIsIl9vcHRpb25zJGljb25zIiwic3VjY2VzcyIsImljb25zIiwiX29wdGlvbnMkc3RhdGUyIiwiX29wdGlvbnMkaWNvbnMyIiwiaW5mbyIsIl9vcHRpb25zJHN0YXRlMyIsIl9vcHRpb25zJGljb25zMyIsIndhcm5pbmciLCJfb3B0aW9ucyRzdGF0ZTQiLCJfb3B0aW9ucyRpY29uczQiLCJlcnJvciJdLCJtYXBwaW5ncyI6IkFBQUEsYUFPQSxTQUFTQSxtQkFBbUJDLEdBQU8sT0FBT0MsbUJBQW1CRCxJQUFRRSxpQkFBaUJGLElBQVFHLDRCQUE0QkgsSUFBUUkscUJBRWxJLFNBQVNBLHFCQUF1QixNQUFNLElBQUlDLFVBQVUsd0lBRXBELFNBQVNGLDRCQUE0QkcsRUFBR0MsR0FBVSxHQUFLRCxFQUFMLENBQWdCLEdBQWlCLGlCQUFOQSxFQUFnQixPQUFPRSxrQkFBa0JGLEVBQUdDLEdBQVMsSUFBSUUsRUFBSUMsT0FBT0MsVUFBVUMsU0FBU0MsS0FBS1AsR0FBR1EsTUFBTSxHQUFJLEdBQWlFLE1BQW5ELFdBQU5MLEdBQWtCSCxFQUFFUyxjQUFhTixFQUFJSCxFQUFFUyxZQUFZQyxNQUFnQixRQUFOUCxHQUFxQixRQUFOQSxFQUFvQlEsTUFBTUMsS0FBS1osR0FBYyxjQUFORyxHQUFxQiwyQ0FBMkNVLEtBQUtWLEdBQVdELGtCQUFrQkYsRUFBR0MsUUFBekcsR0FF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RUFBQUEsRUFBZ0JDLFFBQVMsT0E2RHJDbkUsUUFBUUUsS0FBT0EiLCJmaWxlIjoibm90aWZ5LmpzIiwic291cmNlc0NvbnRlbnQiOlsiY2xhc3MgTm90aWZ5IHtcbiAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgdGhpcy5ub3RpZmljYXRpb25XcmFwID0gbnVsbDtcbiAgICB0aGlzLmNvdW50ID0gMDtcbiAgICB0aGlzLnNob3duTWVzc2FnZXMgPSBbXTtcbiAgfVxuXG4gIHNob3coZWxlbWVudCkge1xuICAgIGlmICghdGhpcy5ub3RpZmljYXRpb25XcmFwKSB7XG4gICAgICB0aGlzLm5vdGlmaWNhdGlvbldyYXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblxuICAgICAgdGhpcy5ub3RpZmljYXRpb25XcmFwLmNsYXNzTGlzdC5hZGQoYCR7dGhpcy5vcHRpb25zLmNsYXNzfS13cmFwYCk7XG4gICAgICBkb2N1bWVudC5ib2R5Lmluc2VydEFkamFjZW50RWxlbWVudCgnYWZ0ZXJCZWdpbicsIHRoaXMubm90aWZpY2F0aW9uV3JhcCk7XG4gICAgfVxuXG4gICAgdGhpcy5ub3RpZmljYXRpb25XcmFwLmluc2VydEFkamFjZW50RWxlbWVudCgnYWZ0ZXJCZWdpbicsIGVsZW1lbnQpO1xuICB9XG5cbiAgaGlkZShlbGVtZW50KSB7XG4gICAgZWxlbWVudC5zdHlsZS5vcGFjaXR5ID0gJzAnO1xuXG4gICAgY29uc3Qgd2hlblRyYW5zaXRpb25FbmQgPSAoKSA9PiB7XG4gICAgICBlbGVtZW50LnBhcmVudEVsZW1lbnQucmVtb3ZlQ2hpbGQoZWxlbWVudCk7XG4gICAgICBlbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RyYW5zaXRpb25lbmQnLCB3aGVuVHJhbnNpdGlvbkVuZCk7XG5cbiAgICAgIHRoaXMuc2hvd25NZXNzYWdlcyA9IHRoaXMuc2hvd25NZXNzYWdlcy5maWx0ZXIobnVtYmVyID0+IG51bWJlciAhPT0gdGhpcy5jb3VudCk7XG4gICAgICB0aGlzLmNvdW50IC09IDE7XG5cbiAgICAgIGlmICghdGhpcy5zaG93bk1lc3NhZ2VzLmxlbmd0aCAmJiB0aGlzLm5vdGlmaWNhdGlvbldyYXApIHtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZCh0aGlzLm5vdGlmaWNhdGlvbldyYXApO1xuXG4gICAgICAgIHRoaXMubm90aWZpY2F0aW9uV3JhcCA9IG51bGw7XG4gICAgICAgIHRoaXMuY291bnQgPSAwO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RyYW5zaXRpb25lbmQnLCB3aGVuVHJhbnNpdGlvbkVuZCk7XG4gIH1cblxuICByZW5kZXIoeyBtZXNzYWdlLCBzdGF0ZSwgaWNvbiB9KSB7XG4gICAgY29uc3QgbmV3TWVzc2FnZXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBjb25zdCBub3RpZnlDbGFzcyA9IHRoaXMub3B0aW9ucy5jbGFzcztcbiAgICBjb25zdCBhZGRpdGlvbmFsQ2xhc3NlcyA9IHRoaXMub3B0aW9ucy5hZGRpdGlvbmFsQ2xhc3Nlcy5zcGxpdCgnICcpLmZpbHRlcihCb29sZWFuKTtcblxuICAgIG5ld01lc3NhZ2VzLmNsYXNzTGlzdC5hZGQobm90aWZ5Q2xhc3MsIC4uLmFkZGl0aW9uYWxDbGFzc2VzKTtcblxuICAgIGlmIChzdGF0ZSkge1xuICAgICAgbmV3TWVzc2FnZXMuY2xhc3NMaXN0LmFkZChgJHtub3RpZnlDbGFzc30tLSR7c3RhdGV9YCk7XG4gICAgfVxuXG4gICAgaWYgKGljb24pIHtcbiAgICAgIG5ld01lc3NhZ2VzLmlubmVySFRNTCA9IGBcbiAgICAgIDxpIGNsYXNzPVwiJHtub3RpZnlDbGFzc31fX2ljb24gJHtpY29ufVwiPjwvaT5cbiAgICAgIDxzcGFuIGNsYXNzPVwiJHtub3RpZnlDbGFzc31fX2JvZHlcIj4ke21lc3NhZ2V9PC9zcGFuPlxuICAgIGA7XG4gICAgfSBlbHNlIHtcbiAgICAgIG5ld01lc3NhZ2VzLnRleHRDb250ZW50ID0gbWVzc2FnZTtcbiAgICB9XG5cbiAgICB0aGlzLmNvdW50ICs9IDE7XG5cbiAgICB0aGlzLnNob3duTWVzc2FnZXMucHVzaCh0aGlzLmNvdW50KTtcblxuICAgIHRoaXMuc2hvdyhuZXdNZXNzYWdlcyk7XG5cbiAgICBzZXRUaW1lb3V0KHRoaXMuaGlkZS5iaW5kKHRoaXMsIG5ld01lc3NhZ2VzKSwgdGhpcy5vcHRpb25zLmR1cmF0aW9uKTtcbiAgICBjbGVhclRpbWVvdXQodGhpcy5oaWRlKTtcbiAgfVxufVxuXG5sZXQgJG1lc3NhZ2UgPSAoKSA9PiB7fTtcblxubGV0ICRzdWNjZXNzID0gKCkgPT4ge307XG5cbmxldCAkaW5mbyA9ICgpID0+IHt9O1xuXG5sZXQgJHdhcm5pbmcgPSAoKSA9PiB7fTtcblxubGV0ICRlcnJvciA9ICgpID0+IHt9O1xuXG5jb25zdCBpbml0ID0gb3B0aW9ucyA9PiB7XG4gIGNvbnN0IG5vdGlmeSA9IG5ldyBOb3RpZnkoe1xuICAgIGNsYXNzOiBvcHRpb25zPy5jbGFzcyB8fCAnbm90aWZ5JyxcbiAgICBhZGRpdGlvbmFsQ2xhc3Nlczogb3B0aW9ucz8uYWRkaXRpb25hbENsYXNzZXMgfHwgJycsXG4gICAgZHVyYXRpb246IG9wdGlvbnM/LmR1cmF0aW9uIHx8IDYwMDAsXG4gIH0pO1xuXG4gICRtZXNzYWdlID0gbWVzc2FnZSA9PlxuICAgIG5vdGlmeS5yZW5kZXIoe1xuICAgICAgbWVzc2FnZSxcbiAgICB9KTtcblxuICAkc3VjY2VzcyA9IG1lc3NhZ2UgPT5cbiAgICBub3RpZnkucmVuZGVyKHtcbiAgICAgIG1lc3NhZ2UsXG4gICAgICBzdGF0ZTogb3B0aW9ucz8uc3RhdGU/LnN1Y2Nlc3MgfHwgJycsXG4gICAgICBpY29uOiBvcHRpb25zPy5pY29ucz8uc3VjY2VzcyB8fCAnJyxcbiAgICB9KTtcblxuICAkaW5mbyA9IG1lc3NhZ2UgPT5cbiAgICBub3RpZnkucmVuZGVyKHtcbiAgICAgIG1lc3NhZ2UsXG4gICAgICBzdGF0ZTogb3B0aW9ucz8uc3RhdGU/LmluZm8gfHwgJycsXG4gICAgICBpY29uOiBvcHRpb25zPy5pY29ucz8uaW5mbyB8fCAnJyxcbiAgICB9KTtcblxuICAkd2FybmluZyA9IG1lc3NhZ2UgPT5cbiAgICBub3RpZnkucmVuZGVyKHtcbiAgICAgIG1lc3NhZ2UsXG4gICAgICBzdGF0ZTogb3B0aW9ucz8uc3RhdGU/Lndhcm5pbmcgfHwgJycsXG4gICAgICBpY29uOiBvcHRpb25zPy5pY29ucz8ud2FybmluZyB8fCAnJyxcbiAgICB9KTtcblxuICAkZXJyb3IgPSBtZXNzYWdlID0+XG4gICAgbm90aWZ5LnJlbmRlcih7XG4gICAgICBtZXNzYWdlLFxuICAgICAgc3RhdGU6IG9wdGlvbnM/LnN0YXRlPy5lcnJvciB8fCAnJyxcbiAgICAgIGljb246IG9wdGlvbnM/Lmljb25zPy5lcnJvciB8fCAnJyxcbiAgICB9KTtcbn07XG5cbmV4cG9ydCB7IGluaXQsICRtZXNzYWdlLCAkc3VjY2VzcywgJGluZm8sICR3YXJuaW5nLCAkZXJyb3IgfTtcbiJdfQ==
